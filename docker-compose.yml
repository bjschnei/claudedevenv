services:
  claude-dev:
    build: .
    container_name: claude-code-dev
    user: root  # Run as root to handle docker.sock permissions dynamically
    volumes:
      - "${HOME}/.claude:/home/developer/.claude"
      - "${PROJECT_DIR:-.}:/home/developer/workspace"
      - "/var/run/docker.sock:/var/run/docker.sock"
    working_dir: /home/developer/workspace
    stdin_open: true
    tty: true
    environment:
      - IMPORT_AGENT_OS_PROFILES=${IMPORT_AGENT_OS_PROFILES:-}
